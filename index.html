<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∫–æ–ª—å–Ω—ã–π –ü–æ–º–æ—â–Ω–∏–∫</title>
    <link rel="manifest" href="manifest.json">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2575fc 0%, #6a11cb 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #2575fc;
        }

        h2 {
            color: #2575fc;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .key-system {
            text-align: center;
        }

        .free-key {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 10px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
        }

        .key-input {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        input, textarea {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            width: 100%;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        input:focus, textarea:focus {
            border-color: #2575fc;
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 117, 252, 0.2);
        }

        button {
            background: linear-gradient(135deg, #2575fc, #6a11cb);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .free-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            width: 100%;
            margin-top: 10px;
        }

        .contacts {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .contacts h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .tab-container {
            display: flex;
            margin-bottom: 20px;
            background: #f1f3f4;
            border-radius: 10px;
            padding: 5px;
        }

        .tab {
            flex: 1;
            text-align: center;
            padding: 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .tab.active {
            background: #2575fc;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .equation-type {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .eq-btn {
            padding: 12px;
            background: #e3f2fd;
            border: 2px solid #bbdefb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .eq-btn.active {
            background: #2575fc;
            color: white;
            border-color: #2575fc;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .solution {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 10px;
            border-left: 5px solid #4CAF50;
        }

        .grade-system {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .grade-btn {
            flex: 1;
            padding: 10px;
            background: #f5f5f5;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
        }

        .grade-btn.active {
            background: #2575fc;
            color: white;
            border-color: #2575fc;
        }

        .subject-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .subject-input input {
            flex: 2;
            min-width: 200px;
        }

        .subject-input select {
            flex: 1;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            min-width: 100px;
        }

        .grades-list {
            margin-top: 20px;
        }

        .grade-item {
            display: flex;
            justify-content: space-between;
            padding: 12px;
            background: #f5f5f5;
            border-radius: 8px;
            margin-bottom: 10px;
            align-items: center;
        }

        .notes-list {
            margin-top: 20px;
        }

        .note-item {
            background: #fff3e0;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid #ff9800;
        }

        .note-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .note-btn {
            padding: 8px 15px;
            font-size: 0.9rem;
        }

        .delete-btn {
            background: #f44336;
        }

        .edit-btn {
            background: #ff9800;
        }

        .footer {
            text-align: center;
            padding: 20px;
            background: #f1f3f4;
            margin-top: 30px;
            border-radius: 0 0 20px 20px;
        }

        .gdz-announcement {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            margin-top: 20px;
        }

        .message {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }

        .success {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 5px solid #4CAF50;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            border-left: 5px solid #f44336;
        }

        .hidden {
            display: none;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2575fc;
        }

        @media (max-width: 600px) {
            .equation-type, .subject-input, .grade-system {
                flex-direction: column;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .container {
                border-radius: 15px;
            }
            
            .grade-item {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì –®–∫–æ–ª—å–Ω—ã–π –ü–æ–º–æ—â–Ω–∏–∫</h1>
            <p class="subtitle">–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ —É—á–µ–±–µ | –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω!</p>
        </header>

        <div class="content">
            <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –∫–ª—é—á–∞ -->
            <div id="keyScreen">
                <div class="card key-system">
                    <h2>–•–æ—Ç–∏—Ç–µ —É—á–∏—Ç—å—Å—è –Ω–∞ 5?</h2>
                    <p>–ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é!</p>
                    <div class="free-key">‚ú® –ù–û–í–´–ú –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú 1 –ö–õ–Æ–ß –ë–ï–°–ü–õ–ê–¢–ù–´–ô</div>
                    
                    <div class="key-input">
                        <input type="text" id="keyInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞">
                        <button onclick="checkKey()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    
                    <button class="free-btn" onclick="getFreeKey()">–ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á</button>
                    
                    <div class="contacts">
                        <h3>–ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã:</h3>
                        <p>üì± Telegram: @west_next</p>
                        <p>üìû WhatsApp: +7 (969) 535-69-36</p>
                    </div>
                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Å–∫—Ä—ã—Ç–æ –¥–æ –≤–≤–æ–¥–∞ –∫–ª—é—á–∞) -->
            <div id="appScreen" class="hidden">
                <div class="tab-container">
                    <div class="tab active" onclick="switchTab('equations')">–†–µ—à–µ–Ω–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–π</div>
                    <div class="tab" onclick="switchTab('diary')">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</div>
                    <div class="tab" onclick="switchTab('notes')">–ú–æ–∏ –ø–∞–º—è—Ç–∫–∏</div>
                </div>

                <!-- –†–µ—à–µ–Ω–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–π -->
                <div id="equations" class="tab-content active">
                    <div class="card">
                        <h2>–†–µ—à–µ–Ω–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–π</h2>
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —É—Ä–∞–≤–Ω–µ–Ω–∏—è:</p>
                        
                        <div class="equation-type">
                            <div class="eq-btn active" onclick="selectEquationType('linear')">–õ–∏–Ω–µ–π–Ω—ã–µ</div>
                            <div class="eq-btn" onclick="selectEquationType('quadratic')">–ö–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ</div>
                            <div class="eq-btn" onclick="selectEquationType('system')">–°–∏—Å—Ç–µ–º—ã —É—Ä–∞–≤–Ω–µ–Ω–∏–π</div>
                            <div class="eq-btn" onclick="selectEquationType('fractions')">–î—Ä–æ–±–∏</div>
                        </div>
                        
                        <div id="linearEq" class="equation-input">
                            <div class="input-group">
                                <label>–í–≤–µ–¥–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∏–¥–∞ ax + b = c</label>
                                <input type="text" id="linearInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2x + 5 = 13">
                            </div>
                            <button onclick="solveLinear()">–†–µ—à–∏—Ç—å</button>
                        </div>
                        
                        <div id="quadraticEq" class="equation-input hidden">
                            <div class="input-group">
                                <label>–í–≤–µ–¥–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∏–¥–∞ ax¬≤ + bx + c = 0</label>
                                <input type="text" id="quadraticInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: x¬≤ - 5x + 6 = 0">
                            </div>
                            <button onclick="solveQuadratic()">–†–µ—à–∏—Ç—å</button>
                        </div>
                        
                        <div id="systemEq" class="equation-input hidden">
                            <div class="input-group">
                                <label>–í–≤–µ–¥–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É —É—Ä–∞–≤–Ω–µ–Ω–∏–π</label>
                                <input type="text" id="systemInput1" placeholder="–ü–µ—Ä–≤–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: 2x + y = 7">
                                <input type="text" id="systemInput2" placeholder="–í—Ç–æ—Ä–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: x - y = -1">
                            </div>
                            <button onclick="solveSystem()">–†–µ—à–∏—Ç—å</button>
                        </div>
                        
                        <div id="fractionsEq" class="equation-input hidden">
                            <div class="input-group">
                                <label>–í–≤–µ–¥–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä–æ–±—è–º–∏</label>
                                <input type="text" id="fractionsInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: (x+1)/2 = 3">
                            </div>
                            <button onclick="solveFractions()">–†–µ—à–∏—Ç—å</button>
                        </div>
                        
                        <div id="solution" class="solution hidden">
                            <h3>–†–µ—à–µ–Ω–∏–µ:</h3>
                            <p id="solutionText"></p>
                        </div>
                    </div>
                </div>

                <!-- –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ -->
                <div id="diary" class="tab-content">
                    <div class="card">
                        <h2>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</h2>
                        
                        <div class="stats">
                            <div class="stat-card">
                                <div class="stat-value" id="totalGrades">0</div>
                                <div>–í—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="averageGrade">0</div>
                                <div>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</div>
                            </div>
                        </div>
                        
                        <div class="grade-system">
                            <div class="grade-btn active" onclick="selectGradeSystem('russian')">5-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</div>
                            <div class="grade-btn" onclick="selectGradeSystem('european')">10-–±–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</div>
                        </div>
                        
                        <div class="subject-input">
                            <input type="text" id="subjectName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞">
                            <select id="gradeSelect"></select>
                            <button onclick="addGrade()">–î–æ–±–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button>
                        </div>
                        
                        <div class="grades-list" id="gradesList"></div>
                    </div>
                </div>

                <!-- –ú–æ–∏ –ø–∞–º—è—Ç–∫–∏ -->
                <div id="notes" class="tab-content">
                    <div class="card">
                        <h2>–ú–æ–∏ –ø–∞–º—è—Ç–∫–∏</h2>
                        
                        <div class="input-group">
                            <label>–ù–æ–≤–∞—è –ø–∞–º—è—Ç–∫–∞</label>
                            <input type="text" id="noteTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                            <textarea id="noteText" placeholder="–¢–µ–∫—Å—Ç –ø–∞–º—è—Ç–∫–∏"></textarea>
                        </div>
                        <button onclick="addNote()">–î–æ–±–∞–≤–∏—Ç—å –ø–∞–º—è—Ç–∫—É</button>
                        
                        <div class="notes-list" id="notesList"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="gdz-announcement">
                üìö –°–ö–û–†–û –ë–£–î–ï–¢ –ì–î–ó –û–§–§–õ–ê–ô–ù!
            </div>
            <p>–®–∫–æ–ª—å–Ω—ã–π –ü–æ–º–æ—â–Ω–∏–∫ ¬© 2023 | –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ñ—Ñ–ª–∞–π–Ω!</p>
            <p><small>–°—Ç–∞—Ç—É—Å: <span id="offlineStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></small></p>
        </div>
    </div>

    <script>
        // –°–ø–∏—Å–æ–∫ —Ä–∞–±–æ—á–∏—Ö –∫–ª—é—á–µ–π
        const validKeys = [
            "SHK-A3B9-C2D8", "SHK-E5F7-G6H4", "SHK-J8K3-L9M2", "SHK-N4P6-Q7R5", 
            "SHK-S9T2-U8V4", "SHK-W3X7-Y5Z6", "SHK-2A8B-4C9D", "SHK-6E3F-7G5H", 
            "SHK-8J2K-9L3M", "SHK-5N7P-6Q4R", "SHK-3S8T-4U6V", "SHK-7W9X-2Y8Z", 
            "SHK-B4C6-D8E2", "SHK-F9G3-H5J7", "SHK-K2L4-M6N8", "SHK-P7Q9-R3S5", 
            "SHK-T8V2-W4X6", "SHK-Y7Z3-A5B9", "SHK-C8D4-E6F2", "SHK-G7H9-J3K5", 
            "SHK-L6M8-N4P2", "SHK-Q5R7-S9T3", "SHK-V4W6-X8Y2", "SHK-Z5A7-B9C3", 
            "SHK-D6E8-F4G2", "SHK-H7J9-K5L3", "SHK-M8N2-P6Q4", "SHK-R9S3-T5U7", 
            "SHK-W4X6-Y8Z2", "SHK-A9B3-C5D7"
        ];

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞
        function updateOnlineStatus() {
            const statusElement = document.getElementById('offlineStatus');
            if (navigator.onLine) {
                statusElement.textContent = '–û–Ω–ª–∞–π–Ω';
                statusElement.style.color = '#4CAF50';
            } else {
                statusElement.textContent = '–û—Ñ—Ñ–ª–∞–π–Ω';
                statusElement.style.color = '#f44336';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            updateOnlineStatus();
            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);
            
            if (localStorage.getItem('appActivated') === 'true') {
                showApp();
            }
            
            selectGradeSystem('russian');
            displayGrades();
            displayNotes();
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–∞
        function checkKey() {
            const keyInput = document.getElementById('keyInput');
            const key = keyInput.value.trim().toUpperCase();
            
            if (validKeys.includes(key)) {
                localStorage.setItem('appActivated', 'true');
                localStorage.setItem('usedKey', key);
                showMessage('‚úÖ –ö–ª—é—á –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É!', 'success');
                setTimeout(showApp, 1500);
            } else {
                showMessage('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á.', 'error');
            }
        }

        // –ü–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á
        function getFreeKey() {
            const usedKey = localStorage.getItem('usedKey');
            let freeKey;
            
            if (usedKey) {
                const usedIndex = validKeys.indexOf(usedKey);
                freeKey = validKeys[(usedIndex + 1) % validKeys.length];
            } else {
                freeKey = validKeys[0];
            }
            
            document.getElementById('keyInput').value = freeKey;
            showMessage(`üéÅ –í–∞—à –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª—é—á: ${freeKey}. –ù–∞–∂–º–∏—Ç–µ "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å"!`, 'success');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showMessage(text, type) {
            const existingMessage = document.querySelector('.message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const message = document.createElement('div');
            message.className = `message ${type}`;
            message.textContent = text;
            
            const keySystem = document.querySelector('.key-system');
            keySystem.appendChild(message);
            
            setTimeout(() => {
                if (message.parentNode) {
                    message.remove();
                }
            }, 5000)
